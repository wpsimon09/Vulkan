For now our vertex buffer works but it is not the most efficient way for GPU to read the data. The most efficient memory type is `VK_MEMORY_PROPERTY_DEVICE_LOCAL_BIT` which is usually not accessible on the CPU. 

We will create 2 vertex buffers one into which we will store the data (*staging buffer*) and another one which we will copy the data into so that it is as efficient for GPU as possible.

We have abstracted away the functionality of creating the buffer so that we can reuse it without any complications just by calling the following.

```c++
BufferCreateInfo bufferInfo{};  
bufferInfo.size = sizeof(vertices[0]) * vertices.size();  
bufferInfo.properties = VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT |  
                        VK_MEMORY_PROPERTY_HOST_COHERENT_BIT;  
bufferInfo.usage = VK_BUFFER_USAGE_VERTEX_BUFFER_BIT;  
bufferInfo.surface = m_sruface;  
bufferInfo.logicalDevice = m_device;  
bufferInfo.physicalDevice = m_physicalDevice;  
  
CreateBuffer(bufferInfo, m_vertexBuffer, m_vertexBufferMemory);
```

This will create allocate and bind the buffer to the allocated memory. Additionally it will store the handle through which we can access the buffer. 

Now we can create the staging buffer

```c++
VkBuffer stagingBuffer;  
VkDeviceMemory stagingBufferMemory;
//source of the memory transform operation
//we will transfor to the GPU local memroy from this buffer
bufferInfo.usage = VK_BUFFER_USAGE_TRANSFER_SRC_BIT;  
CreateBuffer(bufferInfo, stagingBuffer, stagingBufferMemory);  
  
void* data;  
vkMapMemory(m_device, stagingBufferMemory, 0, bufferInfo.size, 0, &data);  
memcpy(data, vertices.data(), (size_t)bufferInfo.size);  
vkUnmapMemory(m_device, stagingBufferMemory);
```

We also mus not forget about the actual vertex buffer that we aim to use later. 

```c++
bufferInfo.usage =
// we will use this buffer as memory transfer destination and as vertex buffer at once
VK_BUFFER_USAGE_VERTEX_BUFFER_BIT | VK_BUFFER_USAGE_TRANSFER_DST_BIT;
//and we want it to be the fastes memory possible
bufferInfo.properties = VK_MEMORY_PROPERTY_DEVICE_LOCAL_BIT;  
CreateBuffer(bufferInfo, m_vertexBuffer, m_vertexBufferMemory);
```

Since we have specified to use `VK_MEMORY_PROPERTY_DEVICE_LOCAL_BIT` we are not able to map the vertex buffer to the memory. However we are able to copy to this buffer from the staging buffer. 

