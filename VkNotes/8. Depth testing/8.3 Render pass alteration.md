We now have to change the creation of the render pass to inform Vulkan that it will contain depth image as well. 

To do that we will create new attachment description by using `VkAttachmentDescription` struct.

```c++
VkAttachmentDescription depthAttachment{};  
//format should be the same as a depht image  
depthAttachment.format = FindDepthFormat();  
depthAttachment.samples = VK_SAMPLE_COUNT_1_BIT;  
depthAttachment.loadOp = VK_ATTACHMENT_LOAD_OP_CLEAR;  
depthAttachment.storeOp = VK_ATTACHMENT_STORE_OP_DONT_CARE;  
depthAttachment.stencilLoadOp = VK_ATTACHMENT_LOAD_OP_DONT_CARE;  
//we dont want to read from the depth attachemnt once it was drawn into  
depthAttachment.stencilStoreOp = VK_ATTACHMENT_STORE_OP_DONT_CARE;  
depthAttachment.initialLayout = VK_IMAGE_LAYOUT_UNDEFINED;  
depthAttachment.finalLayout = VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL;
```

Now we have to create reference to this attachment so that we can pass it to the sub pass
```c++
VkAttachmentReference depthAttachmentRef{};  
depthAttachmentRef.attachment = 1;  
depthAttachmentRef.layout = VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL;
```

And lastly we can refer to this attachment in our "main" sub pass 

```c++
VkSubpassDescription subPass{};  
subPass.pipelineBindPoint = VK_PIPELINE_BIND_POINT_GRAPHICS;  
//reference to the colour attachemnt  
subPass.colorAttachmentCount = 1;  
subPass.pColorAttachments = &colorAttachmentRef;  
subPass.pDepthStencilAttachment = &depthAttachmentRef;
```

As can be seen the sub pass can only have one depth attachment as it would not make sense to test multiple depth buffers

